<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta name="description" content="Lukas Woodtli">
    <meta name="author" content="Lukas Woodtli">

        <title>Intel Architecture 路 Lukas Woodtli</title>


    <!-- Bootstrap core CSS -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">

    <link rel="stylesheet" href="http://bootswatch.com/yeti/bootstrap.min.css" type="text/css">

    <link rel="stylesheet" href="http://lukaswoodtli.github.io/theme/css/main.css">

    <link rel="stylesheet" href="http://lukaswoodtli.github.io/theme/css/solarized-light.css">


    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>

    <script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

</head>

<body>
  <div class="container" id="wrap">
      <nav id="navbar" class="navbar navbar-default" role="navigation">
    <div class="container">

      <!--navbar-header-->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://lukaswoodtli.github.io">Lukas Woodtli</a>
      </div> <!--navbar-header-->

      <!-- Search Box -->

      <!--Menuitems, collapable-->
      <div class="collapse navbar-collapse" id="navbar-collapse">
        <ul class="nav navbar-nav navbar-right" id="menuitem-list">
                <li >
                  <a href="http://lukaswoodtli.github.io/index.html">Home</a>
                </li>

                <li >
                  <a href="http://lukaswoodtli.github.io/pages/cv.html">CV</a>
                </li>

              <li class="btn-group">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Skills<b class="caret"></b>
                </a>
                <ul class="dropdown-menu" role="menu">
                  <li >
                    <a href="http://lukaswoodtli.github.io/pages/skills.html">Hard Skills</a>
                  </li>
                  <li >
                    <a href="http://lukaswoodtli.github.io/pages/courses.html">Courses</a>
                  </li>
                  <li >
                    <a href="http://lukaswoodtli.github.io/pages/books.html">Books</a>
                  </li>
                  <li >
                    <a href="http://lukaswoodtli.github.io/pages/projects.html">Projects</a>
                  </li>
                </ul>
              </li>
              <li class="btn-group">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Blog<b class="caret"></b>
                </a>
                <ul class="dropdown-menu" role="menu">
                  <li >
                    <a href="http://lukaswoodtli.github.io/pages/blog.html">Blog Index</a>
                  </li>
                  <li >
                    <a href="http://lukaswoodtli.github.io/categories.html">Categories</a>
                  </li>
                  <li >
                    <a href="http://lukaswoodtli.github.io/tags.html">Tags</a>
                  </li>
                  <li >
                    <a href="http://lukaswoodtli.github.io/archives.html">Chronological</a>
                  </li>
                </ul>
              </li>
                <li >
                  <a href="http://lukaswoodtli.github.io/pages/contact.html">Contact</a>
                </li>

        </ul>
      </div><!-- /.navbar-collapse -->

    </div> <!--container-->
  </nav>


    <div class="container">
      <div class="col-md-2">
      </div>

      <div class="col-md-8">
        <div class="row">
              <div class="page-header">
        <h1><a href="http://lukaswoodtli.github.io/intel_architecture.html">Intel Architecture</a></h1>
    </div>

        </div>

        <div class="row">

    <span id="article_info">
    <a class="label label-primary" 
      href="http://lukaswoodtli.github.io/category/computer_science.html">Computer Science</a>
      <b> 路 </b>
        <a class="label label-primary" 
          href="http://lukaswoodtli.github.io/tag/assembler.html">Assembler</a>
    <!--<span class="glyphicon glyphicon-calendar"></span>-->
      <b> 路 </b>
      <a href="http://lukaswoodtli.github.io/archives.html#Year2015">2015</a>-<a href="http://lukaswoodtli.github.io/archives.html#Year2015Month06">06</a>-<a href="http://lukaswoodtli.github.io/archives.html#Year2015Month06">22</a>

    <!--<span class="glyphicon glyphicon-user"></span>-->
      <b> 路 </b>
    <a href="http://lukaswoodtli.github.io/author/lukas_woodtli.html">Lukas Woodtli</a>
  </span>

  <hr/>

  <div id="article_content">
    <p>On this page I write down some notes about the Intel architecture (x86). I learned most of it in <a href="http://www.vdf.ethz.ch/info/showDetails.asp?isbnNr=3255">school</a> few years ago.</p>
<p>I'ts mainly for Intel 80186. But I'll extend it with informations about modern <a href="http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html">Intel processors</a> (<a href="https://en.wikipedia.org/wiki/IA-32">IA-32</a>, <a href="https://en.wikipedia.org/wiki/X86-64">x86-64</a>).</p>
<p>I'm trying to keep all code examples in <a href="http://www.nasm.us">NASM</a> syntax.</p>
<div class="toc">
<ul>
<li><a href="#general">General</a></li>
<li><a href="#operation-modes">Operation Modes</a></li>
<li><a href="#registers">Registers</a><ul>
<li><a href="#8-bit-registers">8-bit Registers</a></li>
<li><a href="#values-after-reset">Values after Reset</a></li>
<li><a href="#flags-register">FLAGS Register</a></li>
</ul>
</li>
<li><a href="#segmentation">Segmentation</a></li>
<li><a href="#addressing">Addressing</a><ul>
<li><a href="#imediate">Imediate</a></li>
<li><a href="#implicit">Implicit</a></li>
<li><a href="#register">Register</a></li>
<li><a href="#direct">Direct</a></li>
<li><a href="#register-indirect">Register-Indirect</a><ul>
<li><a href="#address">Address</a><ul>
<li><a href="#segment-prefix">Segment Prefix</a></li>
<li><a href="#operand-size-word-dword">Operand Size (WORD, DWORD...)</a></li>
<li><a href="#examples">Examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#addressing-memory">Addressing Memory</a></li>
</ul>
</li>
<li><a href="#data-transfer-commands">Data Transfer Commands</a><ul>
<li><a href="#move-command-mov">Move Command (MOV)</a></li>
<li><a href="#exchange-command-xchg">Exchange Command (XCHG)</a></li>
<li><a href="#input-output-commands-inout">Input-/Output Commands (IN/OUT)</a></li>
</ul>
</li>
<li><a href="#arithmetic-commands">Arithmetic Commands</a><ul>
<li><a href="#addition-add">Addition (ADD)</a><ul>
<li><a href="#affected-flags">Affected Flags</a></li>
</ul>
</li>
<li><a href="#addition-with-carry-adc">Addition with Carry (ADC)</a><ul>
<li><a href="#affected-flags_1">Affected Flags</a></li>
</ul>
</li>
<li><a href="#increment-inc">Increment (INC)</a><ul>
<li><a href="#affected-flags_2">Affected Flags</a></li>
</ul>
</li>
<li><a href="#subtraction-sub">Subtraction (SUB)</a><ul>
<li><a href="#affected-flags_3">Affected Flags</a></li>
</ul>
</li>
<li><a href="#subtraction-with-borrow-sbb">Subtraction with Borrow (SBB)</a><ul>
<li><a href="#affected-flags_4">Affected Flags</a></li>
</ul>
</li>
<li><a href="#decrement-dec">Decrement (DEC)</a><ul>
<li><a href="#affected-flags_5">Affected Flags</a></li>
</ul>
</li>
<li><a href="#negate-a-signed-number-neg">Negate a signed Number (NEG)</a><ul>
<li><a href="#affected-flags_6">Affected Flags</a></li>
</ul>
</li>
<li><a href="#multiplication-mul-imul">Multiplication (MUL, IMUL)</a><ul>
<li><a href="#affected-flags_7">Affected Flags</a></li>
</ul>
</li>
<li><a href="#division-div-idiv">Division (DIV, IDIV)</a><ul>
<li><a href="#affected-flags_8">Affected Flags</a></li>
</ul>
</li>
<li><a href="#convert-operand-size-cbw-cwd">Convert Operand Size (CBW, CWD)</a></li>
</ul>
</li>
<li><a href="#logical-commands">Logical Commands</a><ul>
<li><a href="#and-or-and-xor-and-or-xor">And, Or and Xor (AND, OR, XOR)</a><ul>
<li><a href="#affected-flags_9">Affected Flags</a></li>
</ul>
</li>
<li><a href="#not-not">Not (NOT)</a><ul>
<li><a href="#affected-flags_10">Affected Flags</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#rotation-commands">Rotation Commands</a><ul>
<li><a href="#roatate-rol-ror">Roatate (ROL, ROR)</a><ul>
<li><a href="#affected-flags_11">Affected Flags</a></li>
</ul>
</li>
<li><a href="#rotate-with-carry-rcl-rcr">Rotate with Carry (RCL, RCR)</a><ul>
<li><a href="#affected-flags_12">Affected Flags</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#manipulate-the-carry-flag-clc-stc-cmc">Manipulate the Carry Flag (CLC, STC, CMC)</a></li>
<li><a href="#shift-commands">Shift Commands</a><ul>
<li><a href="#left-shift-commands-shl-sal">Left Shift Commands (SHL, SAL)</a><ul>
<li><a href="#affected-flags_13">Affected Flags</a></li>
</ul>
</li>
<li><a href="#right-shift-commands-shr-sar">Right  Shift Commands (SHR, SAR)</a><ul>
<li><a href="#affected-flags_14">Affected Flags</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#jump-commands">Jump Commands</a><ul>
<li><a href="#conditionalunconditional-jumps">Conditional/Unconditional Jumps</a></li>
<li><a href="#short-near-and-far-jumps">Short, Near and Far Jumps</a></li>
<li><a href="#direct-and-indirect-jumps">Direct and Indirect Jumps</a></li>
<li><a href="#absolute-and-relative-jumps">Absolute and Relative Jumps</a></li>
<li><a href="#intra-and-inter-segment-jumps">Intra- and Inter-Segment Jumps</a><ul>
<li><a href="#intra-segment-jump">Intra-Segment Jump</a><ul>
<li><a href="#near-jump">Near Jump</a></li>
<li><a href="#short-jump">Short Jump</a></li>
</ul>
</li>
<li><a href="#inter-segment-jump">Inter-Segment Jump</a></li>
</ul>
</li>
<li><a href="#unconditional-jumps">Unconditional Jumps</a></li>
<li><a href="#conditional-jumps">Conditional Jumps</a><ul>
<li><a href="#arithmetic-jumps">Arithmetic Jumps</a><ul>
<li><a href="#arithmetic-unsigned-jumps">Arithmetic "unsigned" Jumps</a></li>
<li><a href="#arithmetic-signed-jumps">Arithmetic "signed" Jumps</a></li>
</ul>
</li>
<li><a href="#flag-oriented-jumps">Flag oriented Jumps</a></li>
</ul>
</li>
<li><a href="#compairing-commands-cmp-test">Compairing Commands (CMP, TEST)</a></li>
</ul>
</li>
<li><a href="#loop-commands-loopx-jcxz">Loop Commands (LOOPx, JCXZ)</a><ul>
<li><a href="#loop-loop">Loop (LOOP)</a></li>
<li><a href="#loop-while-equal-and-loop-while-zero-loope-loopz">Loop while equal and Loop while zero (LOOPE, LOOPZ)</a></li>
<li><a href="#loop-while-not-equal-and-loop-while-not-zero-loopne-loopnz">Loop while not equal and Loop while not zero (LOOPNE, LOOPNZ)</a></li>
<li><a href="#jump-if-cx-zero-jcxz">Jump if CX zero (JCXZ)</a></li>
</ul>
</li>
</ul>
</div>
<h1 id="general">General</h1>
<table class="table table-hover table-striped">
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>CPU Design</td>
<td><a href="https://en.wikipedia.org/wiki/Complex_instruction_set_computing">CISC</a></td>
</tr>
<tr>
<td>Endianness</td>
<td><a href="https://en.wikipedia.org/wiki/Endianness">little</a></td>
</tr>
<tr>
<td>Type</td>
<td><a href="https://en.wikipedia.org/wiki/Register_memory_architecture">Register-memory</a></td>
</tr>
</tbody>
</table>
<h1 id="operation-modes">Operation Modes</h1>
<table class="table table-hover table-striped">
<thead>
<tr>
<th>Mode</th>
<th>Introduced in</th>
</tr>
</thead>
<tbody>
<tr>
<td>Real Mode</td>
<td>8086</td>
</tr>
<tr>
<td>Protected Mode</td>
<td>80286</td>
</tr>
<tr>
<td>Virtual 8086 mode</td>
<td>80386</td>
</tr>
<tr>
<td>Long Mode</td>
<td>x86-64</td>
</tr>
</tbody>
</table>
<h1 id="registers">Registers</h1>
<p>This are the 16-bit registers of Intel 8086, 8088,  80186 and 80188.</p>
<table class="table table-hover table-striped">
<thead>
<tr>
<th>Register</th>
<th>Purpose</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>AX</td>
<td>General-Purpose Register (GPR)</td>
<td>Accumulator for <code>IN</code>/<code>OUT</code> (AX or AL). Can be used as 8-bit registers (AH/AL).</td>
</tr>
<tr>
<td>BX</td>
<td>General-Purpose Register (GPR)</td>
<td>Base index (array). Can be used as 8-bit registers (BH/BL).</td>
</tr>
<tr>
<td>CX</td>
<td>General-Purpose Register (GPR)</td>
<td>Only register that can be used for <code>LOOP</code>. Can be used as 8-bit registers (CH/CL).</td>
</tr>
<tr>
<td>DX</td>
<td>General-Purpose Register (GPR)</td>
<td>Needs to contain port address for <code>IN</code>/<code>OUT</code>. Extend precision of accumulator. Can be used as 8-bit registers (DH/DL).</td>
</tr>
<tr>
<td>DI</td>
<td>Destination Index</td>
<td>Destination for string operations.</td>
</tr>
<tr>
<td>SI</td>
<td>Source Index</td>
<td>Source for string operations.</td>
</tr>
<tr>
<td>BP</td>
<td>Base Pointer</td>
<td>Often used as Frame Pointer (pointing to current stack frame).</td>
</tr>
<tr>
<td>SP</td>
<td>Stack Pointer</td>
<td>Points to the top of the stack.</td>
</tr>
<tr>
<td>CS</td>
<td>Segment Register</td>
<td>Code Segment.</td>
</tr>
<tr>
<td>DS</td>
<td>Segment Register</td>
<td>Data Segment.</td>
</tr>
<tr>
<td>SS</td>
<td>Segment Register</td>
<td>Stack Segment.</td>
</tr>
<tr>
<td>ES</td>
<td>Segment Register</td>
<td>Extra Segment.</td>
</tr>
<tr>
<td>FLAGS</td>
<td>Status Register</td>
<td>Carry Flag, Overflow Flag, Zero flag...</td>
</tr>
<tr>
<td>IP</td>
<td>Instruction Pointer</td>
<td>Points to the <em>next</em> instruction (cannot be directly accessed).</td>
</tr>
</tbody>
</table>
<h2 id="8-bit-registers">8-bit Registers</h2>
<p>Each of the <em>GPRs</em> can be accessed as two 8 bit registers. i. e:
<em>BX's</em> high byte can be accessed as <em>BH</em> and low byte as <em>BL</em>.</p>
<h2 id="values-after-reset">Values after Reset</h2>
<table class="table table-hover table-striped">
<thead>
<tr>
<th>Register</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>IP</td>
<td><code>0x0000</code></td>
</tr>
<tr>
<td>CS</td>
<td><code>0xffff</code></td>
</tr>
<tr>
<td>DS</td>
<td><code>0x0000</code></td>
</tr>
<tr>
<td>ES</td>
<td><code>0x0000</code></td>
</tr>
<tr>
<td>SS</td>
<td><code>0x0000</code></td>
</tr>
</tbody>
</table>
<p>All other registers have a random value after reset.</p>
<h2 id="flags-register">FLAGS Register</h2>
<table class="table table-hover table-striped">
<thead>
<tr>
<th>Bit</th>
<th align="center">15</th>
<th align="center">14</th>
<th align="center">13 and 12</th>
<th align="center">11</th>
<th align="center">10</th>
<th align="center">9</th>
<th align="center">8</th>
</tr>
</thead>
<tbody>
<tr>
<td>Mnemonic</td>
<td align="center">-</td>
<td align="center">NT</td>
<td align="center">IOPL</td>
<td align="center">OF</td>
<td align="center">DF</td>
<td align="center">IF</td>
<td align="center">TF</td>
</tr>
<tr>
<td>Meaning</td>
<td align="center">Reserved</td>
<td align="center">Nested Task (286+)</td>
<td align="center">I/O Privilege Level (286+)</td>
<td align="center">Overflow</td>
<td align="center">Direction</td>
<td align="center">Interrupt Enable</td>
<td align="center">Trap</td>
</tr>
</tbody>
</table>
<table class="table table-hover table-striped">
<thead>
<tr>
<th>Bit</th>
<th align="center">7</th>
<th align="center">6</th>
<th align="center">5</th>
<th align="center">4</th>
<th align="center">3</th>
<th align="center">2</th>
<th align="center">1</th>
<th align="center">0</th>
</tr>
</thead>
<tbody>
<tr>
<td>Mnemonic</td>
<td align="center">SF</td>
<td align="center">ZF</td>
<td align="center">-</td>
<td align="center">AF</td>
<td align="center">-</td>
<td align="center">PF</td>
<td align="center">-</td>
<td align="center">CF</td>
</tr>
<tr>
<td>Meaning</td>
<td align="center">Sign</td>
<td align="center">Zero</td>
<td align="center">Reserved</td>
<td align="center">Adjust</td>
<td align="center">Reserved</td>
<td align="center">Parity</td>
<td align="center">Reserved</td>
<td align="center">Carry</td>
</tr>
</tbody>
</table>
<h1 id="segmentation">Segmentation</h1>
<p>To allow access to 20-bit addresses with 16-bit registers the 8086 uses segmentation.</p>
<div class="math">$$physical\_ address = segment\_ register \times 10_{hex} + offset$$</div>
<ul>
<li><span class="math">\(\times 10_{hex}\)</span> means a 4-bit shift to left</li>
<li>Each addressable segment is 64 kB big.</li>
<li>20-bit address bus: Total <span class="math">\(2^{20}\)</span> bytes addressable (1'048'576 bytes = 1 MB).</li>
<li>16-bit offset: <span class="math">\(2^{16}\)</span> bytes addressable (65'536 bytes = 64 kB) per segment.</li>
<li>Needed segments: <span class="math">\(2^{20}/2^{16} = 2^4 = 16\)</span> segments needed to access complete address space.</li>
<li>Segments can overlap or there can be gaps between them.</li>
</ul>
<h1 id="addressing">Addressing</h1>
<p>Intel processors have 5 different addressing modes.</p>
<h2 id="imediate">Imediate</h2>
<p>The operand (constant) is given with the command. i.e:</p>
<pre>MOV CL, <strong>42</strong>; move the value 42 to register CL</pre>
<h2 id="implicit">Implicit</h2>
<p>Some commands work always with the same register/address. i.e:</p>
<p><code>PUSH</code>/<code>POP</code> work always with SP register.</p>
<h2 id="register">Register</h2>
<p>The operand is held in a register</p>
<pre>INC <strong>CH</strong>; Increment value in CH register</pre>
<h2 id="direct">Direct</h2>
<p>The address of the operand value comes directly after the command. i. e:</p>
<pre>MOV CX, <strong>counter</strong>; counter holds the address of the value</pre>
<h2 id="register-indirect">Register-Indirect</h2>
<p>The operand is given indirectly by one or two registers. A segment register and a constant offset value can be supplied.</p>
<p>The calculated value acts as a pointer (address to a memory location).</p>
<p>i.e:</p>
<pre>MOV <strong>[BX + DI]</strong>, CH; calculate the operand with the values from BX and DI</pre>
<h3 id="address">Address</h3>
<p>To calculate an address the following scheme is used:</p>
<div class="math">$$Offset := \begin{Bmatrix}-\\CS:\\DS:\\SS:\\ES:\end{Bmatrix}\begin{Bmatrix}-\\BX\\BP\end{Bmatrix} +\begin{Bmatrix}-\\SI\\DI\end{Bmatrix} + \begin{Bmatrix}-\\displacement_8\\displacement_{16}\end{Bmatrix}$$</div>
<p><span class="math">\(-\)</span> means that this element is not used.</p>
<p>The three possible address parts are:</p>
<ol>
<li>Basis Register (BX or BP): Contains usually the start address of a data structure. A segment prefix can be given.</li>
<li>Index Register (SI or DI): Can contain an index (i.e Array index) that can be calculated at runtime. It's 16-bit unsigned.</li>
<li>Displacement: A <em>signed</em> constant value (8-bit or 16-bit) that gives an offset.</li>
</ol>
<p>This addressing scheme gives a total of 27 addressing combinations. But only <em>24</em> combinations are allowed. The following three are <strong>not allowed</strong>:</p>
<ul>
<li>No address at all: <pre><strike>MOV AX, [];</strike></pre> or <pre><strike>MOV AX, ;</strike></pre></li>
<li>Only 8-bit displacement: Only memory 0-255 could be addressed.</li>
<li>Only BP: BP points to stack. No practical use. <pre><strike>MOV AX, [BP];</strike></pre></li>
</ul>
<h4 id="segment-prefix">Segment Prefix</h4>
<p>A segment prefix (<strong>CS:</strong>, <strong>DS:</strong>, <strong>ES:</strong> or <strong>SS:</strong>) defines which segment register will be used for calculating the address.
Default for most registers is DS. But for BP the default is SS.</p>
<h4 id="operand-size-word-dword">Operand Size (<code>WORD</code>, <code>DWORD</code>...)</h4>
<p>In some cases the size of an operand can be given (for some cases it is even mandatory). Size types:</p>
<p><code>BYTE</code>, <code>WORD</code>, <code>DWORD</code>, <code>QWORD</code>, <code>TBYTE</code>, <code>FAR</code>...</p>
<h4 id="examples">Examples</h4>
<div class="highlight"><pre><span class="nf">MOV</span> <span class="nb">DX</span><span class="p">,</span> <span class="p">[</span><span class="nb">BX</span><span class="p">]</span><span class="c1">;</span>
<span class="nf">MOV</span> <span class="nb">AL</span><span class="p">,</span> <span class="p">[</span><span class="nb">BX</span><span class="o">+</span><span class="mi">4</span><span class="p">]</span><span class="c1">;</span>
<span class="nf">MOV</span> <span class="nb">CX</span><span class="p">,</span> <span class="p">[</span><span class="nb">CS</span><span class="p">:</span><span class="nb">BX</span><span class="o">+</span><span class="nb">SI</span><span class="p">]</span><span class="c1">;</span>
<span class="nf">MOV</span> <span class="nb">ES</span><span class="p">,</span> <span class="p">[</span><span class="nb">BX</span><span class="o">+</span><span class="nb">DI</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span><span class="c1">;</span>
<span class="nf">MOV</span> <span class="kt">WORD</span> <span class="p">[</span><span class="nb">ES</span><span class="p">:</span><span class="nb">BX</span><span class="o">+</span><span class="nb">DI</span><span class="o">+</span><span class="mi">8</span><span class="p">],</span> <span class="nb">AX</span><span class="c1">;</span>
</pre></div>
<h2 id="addressing-memory">Addressing Memory</h2>
<p>For addressing the memory the immediate, direct and indirect method can be used.</p>
<h1 id="data-transfer-commands">Data Transfer Commands</h1>
<h2 id="move-command-mov">Move Command (<code>MOV</code>)</h2>
<p>Moves (copies) a value from a source to a destination.</p>
<div class="highlight"><pre><span class="nf">MOV</span> <span class="nv">dest</span><span class="p">,</span> <span class="nv">src</span><span class="c1">;</span>
</pre></div>
<ul>
<li><code>dest</code> can be a memory variable or a register (but not CS or IP).</li>
<li><code>src</code> can be a memory variable, a register or a constant.</li>
<li>Only one memory operand can be used. Then the other one needs to be a register or a constant.</li>
</ul>
<h2 id="exchange-command-xchg">Exchange Command (<code>XCHG</code>)</h2>
<p>Exchanges the values of the two operands (memory/registers).</p>
<div class="highlight"><pre><span class="nf">XCHG</span> <span class="nv">op1</span><span class="p">,</span> <span class="nv">op2</span>
</pre></div>
<ul>
<li>Addressing memory/register is same as with <code>MOV</code>.</li>
<li>Segment Register and Immediate addressing is not possible.</li>
</ul>
<h2 id="input-output-commands-inout">Input-/Output Commands (<code>IN</code>/<code>OUT</code>)</h2>
<p>For reading and writing data to/from ports</p>
<p>Input/Output can only be done with accumulator register (AX/AL).</p>
<p>Port address needs to be written to DX before calling the IN-/OUT-Command. As special case a 8-bit port address can be given directly.</p>
<div class="highlight"><pre><span class="nf">IN</span> <span class="nb">AL</span><span class="p">,</span> <span class="nb">DX</span><span class="c1">;</span>
<span class="nf">OUT</span> <span class="nb">DX</span><span class="p">,</span> <span class="nb">AX</span><span class="c1">;</span>
<span class="nf">IN</span> <span class="nb">AX</span><span class="p">,</span> <span class="mh">42h</span><span class="c1">;</span>
<span class="nf">OUT</span> <span class="mh">16h</span><span class="p">,</span> <span class="nb">AL</span><span class="c1">;</span>
</pre></div>
<p>It's not possible communicate directly between memory and ports. For this a DMA (Direct Memory Access) Hardware would be needed.</p>
<h1 id="arithmetic-commands">Arithmetic Commands</h1>
<ul>
<li>The result of arithmetic commands is written to the first operand (the original value is lost).</li>
<li>Both operands (of binary arithmetic commands) need to be of same size.</li>
<li>Only one operand is allowed to be a memory operand.</li>
</ul>
<h2 id="addition-add">Addition (<code>ADD</code>)</h2>
<p>Adds the two operands and writes the result into the first one. The first operand can not be a constant.</p>
<h3 id="affected-flags">Affected Flags</h3>
<ul>
<li>Carry: with unsigned operands</li>
<li>Overflow: with signed operands</li>
<li>Zero: if result is zero</li>
<li>Sign: if signed result is negative</li>
<li>Parity: if parity is even</li>
</ul>
<h2 id="addition-with-carry-adc">Addition with Carry (<code>ADC</code>)</h2>
<p>Adds the two operands and the carry flag. The result is written into the first operand. The first operand can not be a constant.</p>
<blockquote>
<p>Addition of big signed operands can be splitted into several <code>ADC</code> commands.</p>
</blockquote>
<h3 id="affected-flags_1">Affected Flags</h3>
<ul>
<li>Carry: with unsigned operands</li>
<li>Overflow: with signed operands</li>
<li>Zero: if result is zero</li>
<li>Sign: if signed result is negative</li>
<li>Parity: if parity is even</li>
</ul>
<h2 id="increment-inc">Increment (<code>INC</code>)</h2>
<p>Adds one to the operand. The result is saved in the given operand.</p>
<h3 id="affected-flags_2">Affected Flags</h3>
<ul>
<li>Overflow: with signed operands</li>
<li>Zero: if result is zero</li>
<li>Sign: if signed result is negative</li>
<li>Parity: if parity is even</li>
</ul>
<blockquote>
<p>The carry-flag is not affected! An overflow can be recognized with the zero-flag.</p>
<p><code>INC</code> can be used to increment a control variable in a loop without affecting the carry-flag.</p>
</blockquote>
<h2 id="subtraction-sub">Subtraction (<code>SUB</code>)</h2>
<p>Subtracts the second operand from the first. The result is written into the first operand. The first operand can not be a constant.</p>
<h3 id="affected-flags_3">Affected Flags</h3>
<ul>
<li>Carry: with unsigned operands</li>
<li>Overflow: with signed operands</li>
<li>Zero: if result is zero</li>
<li>Sign: if signed result is negative</li>
<li>Parity: if parity is even</li>
</ul>
<h2 id="subtraction-with-borrow-sbb">Subtraction with Borrow (<code>SBB</code>)</h2>
<p>Subtracts the second operand and the carry-flag (borrow) from the first operand. The result is written into the first operand. The first operand can not be a constant.</p>
<h3 id="affected-flags_4">Affected Flags</h3>
<ul>
<li>Carry: with unsigned operands</li>
<li>Overflow: with signed operands</li>
<li>Zero: if result is zero</li>
<li>Sign: if signed result is negative</li>
<li>Parity: if parity is even</li>
</ul>
<blockquote>
<p>Subtraction of big signed operands can be splitted into several <code>SBB</code> commands.</p>
</blockquote>
<h2 id="decrement-dec">Decrement (<code>DEC</code>)</h2>
<p>Subtracts one from the given operand.</p>
<h3 id="affected-flags_5">Affected Flags</h3>
<ul>
<li>Overflow: with signed operands</li>
<li>Zero: if result is zero</li>
<li>Sign: if signed result is negative</li>
<li>Parity: if parity is even</li>
</ul>
<blockquote>
<p>The carry-flag is not affected! An overflow can be only recognized with checking the result for 0xFF.</p>
<p><code>DEC</code> can be used to decrement a control variable in a loop without affecting the carry-flag.</p>
</blockquote>
<h2 id="negate-a-signed-number-neg">Negate a signed Number (<code>NEG</code>)</h2>
<p>Changes a negative into a positive number and vice versa. It's basically subtracting the operand from zero (0).</p>
<h3 id="affected-flags_6">Affected Flags</h3>
<ul>
<li>Carry: set if operand wasn't zero (not very useful)</li>
<li>Overflow: if no positive representation exist (operand was biggest negative number)</li>
<li>Zero: if result is zero</li>
<li>Sign: if signed result is negative</li>
<li>Parity: if parity is even</li>
</ul>
<h2 id="multiplication-mul-imul">Multiplication (<code>MUL</code>, <code>IMUL</code>)</h2>
<p>Multiplicates unsigned (<code>MUL</code>) or signed (<code>IMUL</code>) numbers.</p>
<p>There is a explicit operand given after the command and an implicit operand in the AX or AL register.</p>
<p>The explicit operand sets the size and defines the used implicit register. It can be either a register or a memory location.</p>
<p>The result is always twice as big as the operands. It's either the accumulator (<em>AX</em>)
or the <strong>extended accumulator</strong> (<em>DX/AX</em>).</p>
<p><img alt="The x86 MUL/IMUL commands" class="img-responsive" src="/images/intel_mul.svg"/></p>
<div class="highlight"><pre><span class="nf">MUL</span> <span class="mh">0x0</span> <span class="c1">; Use AL as implicit operand. Result is saved in AX.</span>
<span class="nf">IMUL</span> <span class="nb">BX</span> <span class="c1">; Use AX as implicit operand. Result is saved in DX/AX.</span>
</pre></div>
<h3 id="affected-flags_7">Affected Flags</h3>
<ul>
<li>Carry: set if operand extended acumulator is needed for saving result (<em>DX/AX</em>)</li>
<li>Zero: changed (undefined)</li>
<li>Sign: changed (undefined)</li>
<li>Parity: changed (undefined)</li>
</ul>
<blockquote>
<p>The 8086 can not multiply with constants (immediate).</p>
</blockquote>
<h2 id="division-div-idiv">Division (<code>DIV</code>, <code>IDIV</code>)</h2>
<p>There are different division operations for unsigned (<code>DIV</code>) and signed (<code>IDIV</code>) numbers.</p>
<p>The explicit operand (given directly after the command) defines the size of the operands.
It can be a register or a memory location.</p>
<p>The implicit operand is the accumulator (<em>AX</em>) or the extended accumulator (<em>DX/AX</em>), dependant on
the size of the explicit operator.</p>
<p>The result (quotient) is saved either in <em>AX</em> or <em>AL</em>. The remainder is saved in either <em>DX</em> or <em>AH</em>.</p>
<p><img alt="The x86 MUL/IMUL commands" class="img-responsive" src="/images/intel_div.svg"/></p>
<div class="highlight"><pre><span class="nf">DIV</span> <span class="nb">BX</span> <span class="c1">; Use DX/AX  as implicit operand. Result is saved in AX. Remainder is saved in DX.</span>
<span class="nf">IDIV</span> <span class="mh">0x34</span> <span class="c1">; Use AX as implicit operand. Result is saved in AL. Remainder is saved in AH.</span>
</pre></div>
<h3 id="affected-flags_8">Affected Flags</h3>
<ul>
<li><strong>All</strong> flags are changed to <em>undefined</em>!</li>
</ul>
<blockquote>
<p>If the result is too big for the register <em>AL</em> resp. <em>AX</em> a interrupt (<em>division error</em>) is caused.
If it is not handled the <strong>program can crash</strong> (undefined behaviour).</p>
</blockquote>
<h2 id="convert-operand-size-cbw-cwd">Convert Operand Size (<code>CBW</code>, <code>CWD</code>)</h2>
<p>The commands <em>convert byte to word</em> (<code>CBW</code>) and <em>convert word to doubleword</em> (<code>CWD</code>) convert a <em>signed</em>
number to a number of the same value but twice the size. This is needed to keep the
<a href="https://en.wikipedia.org/wiki/Two%27s_complement">two's complement</a> format.</p>
<h1 id="logical-commands">Logical Commands</h1>
<h2 id="and-or-and-xor-and-or-xor">And, Or and Xor (<code>AND</code>, <code>OR</code>, <code>XOR</code>)</h2>
<p>Bitwise <strong>and</strong>, <strong>or</strong> or <strong>xor</strong>  operation. The first operand can be a register or a memory address. The second operand can
be a register, a memory address or a constant.</p>
<p>The first operand is overwritten with the result.</p>
<h3 id="affected-flags_9">Affected Flags</h3>
<ul>
<li>Carry and Overflow: are always reset (0)</li>
<li>Zero and Sign: are set according to the result</li>
</ul>
<h2 id="not-not">Not (<code>NOT</code>)</h2>
<p>Bitwise <strong>not</strong> (inverse) operation. The operand can be a register or a memory address.</p>
<p>The operand is overwritten with the result.</p>
<h3 id="affected-flags_10">Affected Flags</h3>
<ul>
<li><strong>No</strong> flags are changed</li>
</ul>
<h1 id="rotation-commands">Rotation Commands</h1>
<h2 id="roatate-rol-ror">Roatate (<code>ROL</code>, <code>ROR</code>)</h2>
<p>Rotate left (<code>ROL</code>) or right (<code>ROR</code>).</p>
<p>Rotates the first operand (memory or register) by the constant <strong>1</strong> (immediate) or by the value given in <em>CL</em>.</p>
<div class="highlight"><pre><span class="nf">ROL</span> <span class="mh">0x34</span><span class="p">,</span> <span class="mi">1</span><span class="c1">; Rotate by one.</span>
<span class="nf">ROR</span> <span class="nb">AX</span><span class="p">,</span> <span class="nb">CL</span><span class="c1">; Rotate by value in CL.</span>
</pre></div>
<h3 id="affected-flags_11">Affected Flags</h3>
<ul>
<li>Overflow:<ul>
<li>For one-bit rotation: Overflow set if MSB is changed by the rotation. Otherwise it's not set.</li>
<li>For other cases: Overflow is undefined</li>
</ul>
</li>
<li>Carry has the value of the bit that was shifted from one end to the other.</li>
</ul>
<h2 id="rotate-with-carry-rcl-rcr">Rotate with Carry (<code>RCL</code>, <code>RCR</code>)</h2>
<p>Rotate left (<code>RCL</code>) or right (<code>RCR</code>) with carry as MSB.</p>
<p>The first operand (memory or register) is extended with the carry bit as the MSB.
It is then rotated by the constant <strong>1</strong> (immediate) or by the value given in <em>CL</em>.</p>
<h3 id="affected-flags_12">Affected Flags</h3>
<ul>
<li>Overflow:<ul>
<li>For one-bit rotation: Overflow set if MSB is changed by the rotation. Otherwise it's not set.</li>
<li>For other cases: Overflow is undefined</li>
</ul>
</li>
<li>Carry has the value of the bit that was shifted from one end to the other.</li>
</ul>
<h1 id="manipulate-the-carry-flag-clc-stc-cmc">Manipulate the Carry Flag (<code>CLC</code>, <code>STC</code>, <code>CMC</code>)</h1>
<p>Clear Carry Flag (<code>CLC</code>): CF = 0.</p>
<p>Set Carry Flage (<code>STC</code>): CF = 1.</p>
<p>Complement Carry Flag (<code>CMC</code>): CF = !CF.</p>
<h1 id="shift-commands">Shift Commands</h1>
<p>The shift commands can be used to multiply with or divide by a
power of two (2, 5, 8, ...).</p>
<p>For a multiplication or a division of a <em>unsigned</em> number the <em>logical
shift operators</em> need to be used.</p>
<p>For a multiplication or a division of a <em>signed</em> number the <em>arithmetic
shift operators</em> need to be used.</p>
<h2 id="left-shift-commands-shl-sal">Left Shift Commands (<code>SHL</code>, <code>SAL</code>)</h2>
<p>Both left shift operators are functional identical. They muliplicate
the operator by <em>2</em> or by <span class="math">\(2^{CL}\)</span>.</p>
<p>Shifts the given operator (memory or register) left by
the constant <strong>1</strong> (immediate) or by the value given in <em>CL</em>.</p>
<h3 id="affected-flags_13">Affected Flags</h3>
<ul>
<li>Zero</li>
<li>Sign</li>
<li>Offset</li>
<li>For one-bit shift:<ul>
<li>Carry: For unsigned Operands a set carry flag means <em>overflow</em></li>
<li>Overflow: For signed Operands a set overflow flag means <em>overflow</em></li>
</ul>
</li>
</ul>
<h2 id="right-shift-commands-shr-sar">Right  Shift Commands (<code>SHR</code>, <code>SAR</code>)</h2>
<p>The <em>logical shift right</em> (<code>SHR</code>) divides a unsigned value by <em>2</em> or by <span class="math">\(2^{CL}\)</span>.</p>
<p>The <em>arithmetic shift right</em> (<code>SHR</code>) divides a unsigned value by <em>2</em> or by <span class="math">\(2^{CL}\)</span>.
The sign stays unchanged.</p>
<p>The first operand is a memory location or a register. The second operand is the
constant <strong>1</strong> or the register <em>CL</em>.</p>
<h3 id="affected-flags_14">Affected Flags</h3>
<ul>
<li>CF: For one-bit shifts the carry flag holds the remainder of the division</li>
<li>ZF</li>
<li>SF</li>
<li>(OF)</li>
</ul>
<h1 id="jump-commands">Jump Commands</h1>
<p>Jump commands can be divided by different topics.</p>
<h2 id="conditionalunconditional-jumps">Conditional/Unconditional Jumps</h2>
<p>Unconditional jumps are always performed. Conditional jumps are only
performed if a check gives an expected result (i.e flags).</p>
<h2 id="short-near-and-far-jumps">Short, Near and Far Jumps</h2>
<ul>
<li>Short: signed 8-bit distance</li>
<li>Near: unsigned 16-bit distance</li>
<li>Far: 32-bit (Segment and Offset)</li>
</ul>
<h2 id="direct-and-indirect-jumps">Direct and Indirect Jumps</h2>
<ul>
<li>Direct: The target address is given directly after the command</li>
<li>Indirect: The position is given indirectly by a register or a memory position</li>
</ul>
<h2 id="absolute-and-relative-jumps">Absolute and Relative Jumps</h2>
<ul>
<li>Absolute jumps: The target address is an absolute address</li>
<li>Relative jumps: The target address is given relative to the actual position (<em>IP</em>)</li>
</ul>
<p>The 8086 has following possible jump commands:</p>
<p><img alt="The Intel x86 jump commands" class="img-responsive" src="/images/intel_architecture_jump.svg"/></p>
<h2 id="intra-and-inter-segment-jumps">Intra- and Inter-Segment Jumps</h2>
<p>All jumps change the <em>IP</em> register.</p>
<p>Far jumps also change the <em>CS</em> register.</p>
<h3 id="intra-segment-jump">Intra-Segment Jump</h3>
<p>Short- and Near-Jumps change only the <em>IP</em> register. The target
is always inside the actual code segment (<em>CS</em>).</p>
<h4 id="near-jump">Near Jump</h4>
<ul>
<li>Direct Near-Jumps are always relative to <em>IP</em>.</li>
<li>Indirect Near-Jumps are always absolute to the actual code segment.</li>
</ul>
<h4 id="short-jump">Short Jump</h4>
<p>Short Jumps are always relative to <em>IP</em>.</p>
<h3 id="inter-segment-jump">Inter-Segment Jump</h3>
<p>Far jumps change <em>CS</em> and <em>IP</em>.</p>
<p>All far jumps are absolute.</p>
<h2 id="unconditional-jumps">Unconditional Jumps</h2>
<ul>
<li>8-bit displacement is added to <em>IP</em> as signed number:<pre><strong>JMP</strong> displ8</pre></li>
<li>16-bit displacement is added to <em>IP</em> as unsigned number:<pre><strong>JMP</strong> displ16</pre></li>
<li>The constant is the absolute 32-bit FAR-addresd:<pre><strong>JMP</strong> const32</pre></li>
<li><em>IP</em> is loaded with the value of the register:<pre><strong>JMP</strong> reg16</pre></li>
<li><em>IP</em> is loaded with the value given by the memory position:<pre><strong>JMP</strong> mem16</pre></li>
<li><em>CS</em> and <em>IP</em> are loaded with the value at the memory position:<pre><strong>JMP</strong> mem32</pre></li>
</ul>
<h2 id="conditional-jumps">Conditional Jumps</h2>
<p>Conditional jumps check one or more flags and jump to a given address if a condition is met.</p>
<p>Before the jump can be performed the flags need to be set by a logical or arithmetic command.
Alternatively the commands <code>CMP</code> and <code>TEST</code> can be used.</p>
<p>Conditional jumps can be divided into following groups:</p>
<ul>
<li>Arithmetic jumps: The jump depends on size difference of two operands. The two operands have to be <em>divided</em> in advance.
                    One or more flags have to be checked.</li>
<li>Flag oriented jumps: A jump is performed if <em>one</em> given flag is set or deleted.</li>
</ul>
<h3 id="arithmetic-jumps">Arithmetic Jumps</h3>
<p>The jump is performed if the size relation between two given operands is as expected.</p>
<p>The relation is expressed differently for signed and unsigned operands:</p>
<table class="table table-hover table-striped">
<thead>
<tr>
<th>Relation</th>
<th>unsigned</th>
<th>signed</th>
</tr>
</thead>
<tbody>
<tr>
<td><span class="math">\(=\)</span></td>
<td>equal</td>
<td>equal</td>
</tr>
<tr>
<td><span class="math">\(&lt;\)</span></td>
<td>below</td>
<td>less</td>
</tr>
<tr>
<td><span class="math">\(&gt;\)</span></td>
<td>above</td>
<td>greater</td>
</tr>
</tbody>
</table>
<h4 id="arithmetic-unsigned-jumps">Arithmetic <em>"unsigned"</em> Jumps</h4>
<table class="table table-hover table-striped">
<thead>
<tr>
<th>Relation</th>
<th>Command</th>
<th>Explanation</th>
<th>Condition</th>
</tr>
</thead>
<tbody>
<tr>
<td><span class="math">\(=\)</span></td>
<td><code>JE</code></td>
<td>Jump if equal</td>
<td>ZF <span class="math">\(=\)</span> 1</td>
</tr>
<tr>
<td><span class="math">\(\neq\)</span></td>
<td><code>JNE</code></td>
<td>Jump if not equal</td>
<td>ZF <span class="math">\(=\)</span> 0</td>
</tr>
<tr>
<td><span class="math">\(&lt;\)</span></td>
<td><code>JB</code></td>
<td>Jump if below</td>
<td>CF <span class="math">\(=\)</span> 1</td>
</tr>
<tr>
<td><span class="math">\(\ngeq\)</span></td>
<td><code>JNAE</code></td>
<td>Jump if not above or equal</td>
<td>CF <span class="math">\(=\)</span> 1</td>
</tr>
<tr>
<td><span class="math">\(\ge\)</span></td>
<td><code>JAE</code></td>
<td>Jump if above or equal</td>
<td>CF <span class="math">\(=\)</span> 0</td>
</tr>
<tr>
<td><span class="math">\(\not&lt;\)</span></td>
<td><code>JNB</code></td>
<td>Jump if not below</td>
<td>CF <span class="math">\(=\)</span> 0</td>
</tr>
<tr>
<td><span class="math">\(\le\)</span></td>
<td><code>JBE</code></td>
<td>Jump if below or equal</td>
<td>CF <span class="math">\(=\)</span> 1 or ZF <span class="math">\(=\)</span> 1</td>
</tr>
<tr>
<td><span class="math">\(\not&gt;\)</span></td>
<td><code>JNA</code></td>
<td>Jump if not above</td>
<td>CF <span class="math">\(=\)</span> 1 or ZF <span class="math">\(=\)</span> 1</td>
</tr>
<tr>
<td><span class="math">\(&gt;\)</span></td>
<td><code>JA</code></td>
<td>Jump if above</td>
<td>CF <span class="math">\(=\)</span> 0 and ZF <span class="math">\(=\)</span> 0</td>
</tr>
<tr>
<td><span class="math">\(\not\le\)</span></td>
<td><code>JNBE</code></td>
<td>Jump if not below or equal</td>
<td>CF <span class="math">\(=\)</span> 0 and ZF <span class="math">\(=\)</span> 0</td>
</tr>
</tbody>
</table>
<h4 id="arithmetic-signed-jumps">Arithmetic <em>"signed"</em> Jumps</h4>
<table class="table table-hover table-striped">
<thead>
<tr>
<th>Relation</th>
<th>Command</th>
<th>Explanation</th>
<th>Condition</th>
</tr>
</thead>
<tbody>
<tr>
<td><span class="math">\(=\)</span></td>
<td><code>JE</code></td>
<td>Jump if equal</td>
<td>ZF <span class="math">\(=\)</span> 1</td>
</tr>
<tr>
<td><span class="math">\(\neq\)</span></td>
<td><code>JNE</code></td>
<td>Jump if not equal</td>
<td>ZF <span class="math">\(=\)</span> 0</td>
</tr>
<tr>
<td><span class="math">\(&lt;\)</span></td>
<td><code>JL</code></td>
<td>Jump if less</td>
<td>OF <span class="math">\(\neq\)</span> SF</td>
</tr>
<tr>
<td><span class="math">\(\ngeq\)</span></td>
<td><code>JNGE</code></td>
<td>Jump if not greater or equal</td>
<td>OF <span class="math">\(\neq\)</span> SF</td>
</tr>
<tr>
<td><span class="math">\(\ge\)</span></td>
<td><code>JGE</code></td>
<td>Jump if greater or equal</td>
<td>OF <span class="math">\(=\)</span> SF</td>
</tr>
<tr>
<td><span class="math">\(\not&lt;\)</span></td>
<td><code>JNL</code></td>
<td>Jump if not less</td>
<td>OF <span class="math">\(=\)</span> SF</td>
</tr>
<tr>
<td><span class="math">\(\le\)</span></td>
<td><code>JLE</code></td>
<td>Jump if less or equal</td>
<td>OF <span class="math">\(\neq\)</span> SF or ZF <span class="math">\(=\)</span> 1</td>
</tr>
<tr>
<td><span class="math">\(\not&gt;\)</span></td>
<td><code>JNG</code></td>
<td>Jump if not greater</td>
<td>OF <span class="math">\(\neq\)</span> SF or ZF <span class="math">\(=\)</span> 1</td>
</tr>
<tr>
<td><span class="math">\(&gt;\)</span></td>
<td><code>JG</code></td>
<td>Jump if greater</td>
<td>OF <span class="math">\(=\)</span> SF and ZF <span class="math">\(=\)</span> 0</td>
</tr>
<tr>
<td><span class="math">\(\not\le\)</span></td>
<td><code>JNLE</code></td>
<td>Jump if not less or equal</td>
<td>OF <span class="math">\(=\)</span> SF and ZF <span class="math">\(=\)</span> 0</td>
</tr>
</tbody>
</table>
<h3 id="flag-oriented-jumps">Flag oriented Jumps</h3>
<table class="table table-hover table-striped">
<thead>
<tr>
<th>Command</th>
<th>Explanation</th>
<th>Condition</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>JZ</code></td>
<td>Jump if zero</td>
<td>ZF <span class="math">\(=\)</span> 1</td>
</tr>
<tr>
<td><code>JNZ</code></td>
<td>Jump if not zero</td>
<td>ZF <span class="math">\(=\)</span> 0</td>
</tr>
<tr>
<td><code>JC</code></td>
<td>Jump if carry</td>
<td>CF <span class="math">\(=\)</span> 1</td>
</tr>
<tr>
<td><code>JNC</code></td>
<td>Jump if no carry</td>
<td>CF <span class="math">\(=\)</span> 0</td>
</tr>
<tr>
<td><code>JS</code></td>
<td>Jump if sign</td>
<td>SF <span class="math">\(=\)</span> 1</td>
</tr>
<tr>
<td><code>JNS</code></td>
<td>Jump if no sign</td>
<td>SF <span class="math">\(=\)</span> 0</td>
</tr>
<tr>
<td><code>JO</code></td>
<td>Jump if overflow</td>
<td>OF <span class="math">\(=\)</span> 1</td>
</tr>
<tr>
<td><code>JNO</code></td>
<td>Jump if no overflow</td>
<td>OF <span class="math">\(=\)</span> 0</td>
</tr>
<tr>
<td><code>JP</code></td>
<td>Jump if parity</td>
<td>PF <span class="math">\(=\)</span> 1</td>
</tr>
<tr>
<td><code>JNP</code></td>
<td>Jump if no parity</td>
<td>PF <span class="math">\(=\)</span> 0</td>
</tr>
<tr>
<td><code>JPE</code></td>
<td>Jump if parity even</td>
<td>PF <span class="math">\(=\)</span> 1</td>
</tr>
<tr>
<td><code>JPO</code></td>
<td>Jump if parity odd</td>
<td>PF <span class="math">\(=\)</span> 0</td>
</tr>
</tbody>
</table>
<h2 id="compairing-commands-cmp-test">Compairing Commands (<code>CMP</code>, <code>TEST</code>)</h2>
<p>Since the different jump commands depend on flags set or not there
are special commands that only affect the flags.</p>
<ul>
<li><code>CMP</code> is a subtraction of the operands (8-bit or 16-bit) but it only changes the flags.
   The result is not written anywhere.</li>
<li><code>TEST</code> is a <em>AND</em> operation of the operands (8-bit or 16-bit) that only changes the flags.
   The result is not written anywhere.</li>
</ul>
<p>Both commands accept a register or a memory location as first operand and a register, a memory location
or a constant as second operator.</p>
<h1 id="loop-commands-loopx-jcxz">Loop Commands (<code>LOOPx</code>, <code>JCXZ</code>)</h1>
<p>All loop commands accept an displacement operator (8-bit).</p>
<p>None of the loop commands affects any flags!</p>
<h2 id="loop-loop">Loop (<code>LOOP</code>)</h2>
<p>Decremets <em>CX</em> by one (1). If <em>CX</em> is not zero (<em>CX</em> <span class="math">\(\neq\)</span> 0) it performs the jump.</p>
<h2 id="loop-while-equal-and-loop-while-zero-loope-loopz">Loop while equal and Loop while zero (<code>LOOPE</code>, <code>LOOPZ</code>)</h2>
<p><code>LOOPE</code> and <code>LOOPZ</code> are different mnemonics for the same command.</p>
<p>Decrements <em>CX</em> by one (1). Performs the jump if if Zero Flag is set and <em>CX</em> is not zero (0).</p>
<p>Jump if: ZF <span class="math">\(=\)</span> 1 and CX <span class="math">\(\neq\)</span> 0</p>
<h2 id="loop-while-not-equal-and-loop-while-not-zero-loopne-loopnz">Loop while not equal and Loop while not zero (<code>LOOPNE</code>, <code>LOOPNZ</code>)</h2>
<p><code>LOOPNE</code> and <code>LOOPNZ</code> are different mnemonics for the same command.</p>
<p>Decrements <em>CX</em> by one (1). Performs the jump if if Zero Flag is not set and <em>CX</em> is not zero (0).</p>
<p>Jump if: ZF <span class="math">\(=\)</span> 0 and CX <span class="math">\(\neq\)</span> 0</p>
<h2 id="jump-if-cx-zero-jcxz">Jump if <em>CX</em> zero (<code>JCXZ</code>)</h2>
<p>Performs the jump if <em>CX</em> is zero.</p>
<p>Jump if: CX <span class="math">\(=\)</span> 0</p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }
    
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
  </div>

  <hr/>

      <ul class="pager">
        <li class="previous">
          <a href="http://lukaswoodtli.github.io/arm_cortex-m3_architecture.html">
          &laquo; Newer</a>
        </li>
        <li class="next">
          <a href="http://lukaswoodtli.github.io/endianness.html">
          Older &raquo;</a>
        </li>
      </ul>


        </div>

        <div class="row">
        </div>

      </div>

      <div class="col-md-2">
      </div>
    </div>


  </div>

    <nav id="footer" class="navbar navbar-default">
    <div class="container">
        <p id="footer-text" class="navbar-text text-center">
          <span id="engine">
            Compiled using
            <a href="http://docs.getpelican.com">Pelican</a>
          </span>
          <span id="theme">
            with theme
            <a href="http://github.com/yuex/pelican-chameleon">Chameleon</a>
          </span>
          <span id="bootstrap">
            on top of
            <a href="http://getbootstrap.com/">Bootstrap</a>
          </span>
        </p>
      </div>
    </div>
  </nav>


</body>
</html>